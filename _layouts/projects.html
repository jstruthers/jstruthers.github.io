<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

    {% include header.html %}
    
    <div class="projects-page">
      <div id="projectDetails">
        {% for project in site.projects %}
          <div id="{{ project.title }}View" class="project-view row">

            <div class="logo col center">
              <img src="{{ site.baseurl }}/../../assets/{{ project.imgUrl }}" alt={{ project.imgAlt }} />
            </div>

            <div class="blurb col center">
              <h1>{{ project.title }}</h1>
              <p>{{ project.blurb }}</p>
              <p>You can view a case study of this project 
                <a href="{{ site.url }}/case_studies/{{ project.title }}">here</a>
              </p>
              <a href="{{ project.projectUrl }}">Check it out =></a>
            </div>
          </div>
        {% endfor %}
      </div>
      <div id="projects">
        {% for project in site.projects %}
          <div id="{{ project.title }}MenuIcon"
               class="project-menu-icon"
               onClick="showProject('{{ project.title }}')">
            <div class="flex-center">
              <h1>{{ project.title }}</h1>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    {% include footer.html %}
    <script>
      
      function showProject(title) {
        var projectTitles = [].slice.call(document.getElementById('projectDetails').children)
          .map(function(project) {
            return project.getAttribute('id').slice(0, -4)
          })
        
        projectTitles.forEach(function(projectTitle) {
          console.log('proj title', projectTitle, 'title arg', title)
          if (projectTitle === title) {
            document.getElementById(projectTitle + 'View').classList.remove('hide-project')
            document.getElementById(projectTitle + 'View').classList.add('show-project')
            document.getElementById(projectTitle + 'MenuIcon').classList.add('selected-project')
          } else {
            document.getElementById(projectTitle + 'View').classList.remove('show-project')
            document.getElementById(projectTitle + 'View').classList.add('hide-project')
            document.getElementById(projectTitle + 'MenuIcon').classList.remove('selected-project')
          }
        })
      }
      
      window.onresize = function (event) {
        var arrowL = document.getElementById('arrowLeft'),
            arrowR = document.getElementById('arrowRight'),
            overflowing = _projects.scrollWidth > _projects.clientWidth,
            scrolledRight = _projects.scrollWidth - _projects.scrollLeft === _projects.clientWidth;
        
        if (overflowing && !scrolledRight) {
          // show arrowL && arrowR
        }
      }
    </script>
  </body>

</html>
